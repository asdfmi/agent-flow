## Module Overview
- Express-based API layer that fronts workflow CRUD routes, internal webhooks, and the WebSocket bridge.

## Responsibilities
- Bootstrap the HTTP server (`index.js`) and mount static UI assets from `ui/dist`.
- Register routers under `/api/workflows` and `/internal`.
- Initialise the shared event bus and WebSocket gateway for run streaming.

## Interfaces
- Entry point: `server/index.js` (`pnpm run dev:api`).
- Routers: `routes/workflows.js`, `routes/internal.js`.
- WebSocket path: `/ws` broadcasting `event` payloads emitted on `events/bus.js`.
- Health check: `GET /healthz â†’ { ok: true }`.

## Depends On
- Environment: `DATABASE_URL`, `INTERNAL_SECRET`, `CRAWLER_BASE_URL`.
- Prisma client (`lib/prisma.js`) for persistence.
- Shared event bus (`events/bus.js`) and `ws` package for WebSocket handling.
- Static UI output from `portal/ui/dist`.

## Used By
- Portal workspace root (`portal/README.md`) via `pnpm run dev:api`.
- Crawler service pushing events to `/internal/runs/:runId/events`.
- Operator browsers subscribing to `/ws` and fetching REST endpoints.
