## Module Overview
- WebSocket gateway that fans out run events to subscribed operator sessions.

## Responsibilities
- Accept connections on `/ws`, manage run-specific subscriptions, and heartbeat clients.
- Bridge `bus` events to all sockets watching the corresponding `runId`.

## Interfaces
- `initWs(httpServer)` â€“ attaches a `WebSocketServer` to an existing HTTP server.
- Incoming messages: `{ type: 'subscribe' | 'unsubscribe' | 'ping', runId? }`.
- Outgoing messages: `{ type: 'subscribed', runId }`, event payloads, ping/pong responses.

## Depends On
- `ws` package, shared event bus (`../events/bus.js`), and Node HTTP server.

## Used By
- `server/index.js` when bootstrapping the portal.
- Operator UI clients subscribing for real-time workflow run updates.
